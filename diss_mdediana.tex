% Arquivo LaTeX de exemplo de dissertação/tese a ser apresentados à CPG
% do IME-USP
% 
% Versão 2: Ter Jul  1 17:28:18 BRT 2008
% Autor: J.P. Mena-Chalco
% 
% Obs: Leia previamente o texto do arquivo Readme.txt
%

\documentclass[openany,11pt,twoside,letterpaper]{book}

% ---------------------------------------------------------------------------- %
% Pacotes 
\usepackage[brazil]{babel}
\usepackage[latin1]{inputenc}
\usepackage[pdftex]{graphicx}           % usamos arquivos pdf/png como figuras
\usepackage{color}
\usepackage{pifont}
\usepackage{amsfonts}
\usepackage{amssymb} 
\usepackage{setspace}                   % espaçamento flexível
\usepackage[small,compact]{titlesec} 	% cabeçalhos dos títulos: menores e compactos
\usepackage{indentfirst} 				% indentação do primeiro parágrafo
\usepackage{cite}  						% modo de citação
\usepackage{subfigure} 					% uso de várias figuras numa só
\usepackage{makeidx} 					% índice remissivo
\usepackage[nottoc]{tocbibind} 			% acrescentamos a bibliografia/indice/conteudo no Table of Contents
\usepackage{setspace}
\usepackage{longtable}
\usepackage{lscape}
\usepackage{caption}
\usepackage[pagebackref,colorlinks=true,urlcolor=red,citecolor=green,linkcolor=blue]{hyperref}
\usepackage[letterpaper,top=2.54cm, bottom=2.54cm, left=2.54cm, right=2.54cm]{geometry}

% ---------------------------------------------------------------------------- %
% Alguns comandos
\graphicspath{{./figuras/}} 			% path das figuras (recomendável)
\makeindex  							% para o índice remissivo
\raggedbottom   						% para não permitir espaços extra no texto
\listfiles  							% lista os arquivos utilizados no latex durante a compilação
\normalsize

% Fontes menores nos captions (para figuras e tabelas)
\newcommand{\captionfonts}{\small}
\makeatletter  % Allow the use of @ in command names
\long\def\@makecaption#1#2{%
  \vskip\abovecaptionskip
  \sbox\@tempboxa{{\captionfonts #1: #2}}%
  \ifdim \wd\@tempboxa >\hsize
    {\captionfonts #1: #2\par}
  \else
    \hbox to\hsize{\hfil\box\@tempboxa\hfil}%
  \fi
  \vskip\belowcaptionskip}
\makeatother   % Cancel the effect of \makeatletter

% para melhorar o posicionamento das figuras no texto
\renewcommand{\topfraction}{0.85}
\renewcommand{\textfraction}{0.1}
\renewcommand{\floatpagefraction}{0.75}

% ---------------------------------------------------------------------------- %
% Corpo do texto
\begin{document}
\frontmatter \onehalfspacing  % espaçamento

% ---------------------------------------------------------------------------- %
% Capa
\thispagestyle{empty}
\begin{center}
    \vspace*{2.3cm}
    \textbf{\Large{Consistência em Momento Indeterminado\\
    e Consistência na Linha do Tempo:\\
    Comparativo de Desempenho em Sistemas Geo-replicados}}\\
	
    \vspace*{1.2cm}
    \Large{Mauricio José de Oliveira De Diana}
    
    \vskip 2cm
	\textsc{
	Qualificação de mestrado apresentada\\[-0.25cm] 
	ao\\[-0.25cm]
	Instituto de Matemática e Estatística\\[-0.25cm]
	da\\[-0.25cm]
	Universidade de São Paulo\\[-0.25cm]
	para\\[-0.25cm]
	obtenção do título\\[-0.25cm]
	de\\[-0.25cm]
	Mestre em Ciências}
    
    \vskip 1.5cm
    Programa: Mestrado em Ciência da Computação\\
    Orientador: Prof. Dr. Marco Aurélio Gerosa\\

    \vskip 1cm
%	\normalsize{Durante o desenvolvimento deste trabalho o autor recebeu auxílio
%	financeiro da CAPES/CNPq/FAPESP}
	
    \vskip 0.5cm
    \normalsize{São Paulo, janeiro de 2012}
\end{center}

% ---------------------------------------------------------------------------- %
% Página de rosto (só para a versão final)
%\newpage
%\thispagestyle{empty}
%	\begin{center}
%    	\vspace*{2.3 cm}
%    	\textbf{\Large{Título do trabalho a ser apresentado à \\
%		CPG para a dissertação/tese}}\\
%	    \vspace*{2 cm}
%	\end{center}

%	\vskip 2cm

%	\begin{flushright}
%	Este exemplar corresponde à redação\\
%	final da dissertação/tese devidamente corrigida\\
%	e defendida por (Nome Completo do Aluno)\\
%	e aprovada pela Comissão Julgadora.
%	\vskip 2cm

%	\end{flushright}
%	\vskip 4.2cm

%	\begin{quote}
%	\noindent Banca Examinadora:
	
%	\begin{itemize}
%		\item Prof. Dr. Nome Completo (orientador) - IME-USP.
%		\item Prof. Dr. Nome Completo - IME-USP.
%		\item Prof. Dr. Nome Completo - IMPA.
%	\end{itemize}
	  
%	\end{quote}
%\pagebreak

%\pagenumbering{roman} 	% começamos a numerar 

% ---------------------------------------------------------------------------- %
% Agradecimentos
%\chapter*{Agradecimentos}
%Agradecimentos ...

% ---------------------------------------------------------------------------- %
% Resumo
\chapter*{Resumo}

Sistemas web de larga escala são distribuídos em milhares de servidores em múltiplos centros de dados em diferentes localizações geográficas, operando sobre redes de longa distância (WANs). Várias técnicas são usadas para atingir os altos níveis de escalabilidade requeridos por esses sistemas. Replicação de dados está dentre as principais delas, e tem por objetivo diminuir a latência, aumentar a vazão e/ou aumentar a disponibilidade do sistema. O principal problema do uso de replicação em sistemas geo-replicados é a dificuldade de garantir consistência entre as réplicas sem prejudicar consideravelmente o desempenho e a disponibilidade do sistema. O desempenho do sistema é afetado pelas latências da ordem de centenas de milissegundos da WAN, enquanto a disponibilidade é afetada por falhas que impedem a comunicação entre as réplicas. Quanto mais rígido o modelo de consistência de um sistema de armazenamento, mais simples é o desenvolvimento do sistema que o usa, mas menores são seu desempenho e disponibilidade.

Entre os modelos de consistência mais relaxados e mais difundidos em sistemas web geo-replicados está a consistência em momento indeterminado (\emph{eventual consistency}). Esse modelo de consistência garante que as réplicas convergem após as escritas terem cessado. Um modelo mais rígido e menos difundido é a consistência na linha do tempo. Esse modelo de consistência usa uma réplica mestre para garantir que não ocorram conflitos na escrita. Nas leituras os clientes podem ler os valores mais recentes a partir da cópia mestre, ou optar explicitamente por ler valores desatualizados para obter maior desempenho ou disponibilidade (em caso de falha que impeça a comunicação com a cópia mestre). É possível perceber analiticamente que a consistência na linha do tempo apresenta disponibilidade menor que a consistência em momento indeterminado, mas não existem dados comparando o desempenho de ambas.

O objetivo principal deste trabalho é a comparação do desempenho desses dois modelos de consistência em um sistema de armazenamento geo-replicado. Para cada modelo de consistência, são realizados experimentos que medem o tempo de resposta e a vazão do sistema sob diferentes cargas de trabalho e diferentes latências entre centros de dados. Esse comparativo pode auxiliar desenvolvedores e administradores de sistemas no processo de planejamento de capacidade e nas estimativas do custo de desenvolvimento de um sistema geo-replicado.

\noindent \textbf{Palavras-chave:} Sistemas distribuídos, modelos de consistência, sistemas web de larga escala, desempenho.

% ---------------------------------------------------------------------------- %
% Abstract
\chapter*{Abstract}

Large scale web systems are distributed among thousands of servers spread over multiple data centers in geographically different locations operating over wide-area networks (WANs). Several techniques are employed to achieve the high levels of scalability required by such systems. One of the main techniques is data replication, which aims to reduce latency, increase throughput and/or increase availability. Replication's main drawback in geo-replicated systems is that it is hard to guarantee consistency between replicas without considerably impacting system performance and availability. System performance is affected by WAN latencies of hundreds of miliseconds, while system availability is affected by failures cutting off communication between replicas. The more rigid the consistency model provided by a storage system, the simpler the development of the system using it, but the lower its performance and availability.

Eventual consistency is one of the more relaxed and most widespread consistency models among geo-replicated systems. This consistency model guarantees that all replicas converge at some unspecified time after writes have stopped. A model that is more rigid and less widespread is timeline consistency. This consistency model uses a master replica to guarantee that no write conflicts occur. When reading, clients can read the most up-to-date values from the master replica, or they can explicitly choose to read stale values to obtain greater performance or availability (in case of a failure stopping communication with the master replica). It is possible to see analytically that timeline consistency shows lower availability than eventual consistency, but there are no data comparing their performance.

The main goal of this work is to compare the performance of these two consistency models in a geo-replicated system. For each consistency model, experiments are run to measure system response time and throughput under different workloads and different latencies between data centers. This comparative can support developers and system administrators on capacity planning and development cost estimates of geo-replicated systems.

\noindent \textbf{Keywords:} Distributed systems, consistency models, large scale web systems, performance.

% ---------------------------------------------------------------------------- %
% Sumário
\tableofcontents    % imprime o sumário

% ---------------------------------------------------------------------------- %
% Listas: abreviaturas, símbolos, figuras e tabelas

\chapter{Lista de Abreviaturas}
\begin{tabular}{ll}
 		ACID	& Atomicidade, Consistência, Isolamento, Durabilidade\\
 		CAP		& Consistência, Disponibilidade, Tolerância a particionamento de rede\\
 				& (\emph{Consistency, Availability, Partition tolerance})\\
 		DHT		& Tabela de espalhamento distribuída (\emph{Distributed hash table})\\
 		PACELC	& Particionamento Disponibilidade Consistência, Senão Latência Consistência\\
 				& (\emph{Partition Availability Consistency, Else Latency Consistency})\\
 		SGBD	& Sistema gerenciador de bancos de dados\\
 		SGBDD	& Sistema gerenciador de bancos de dados distribuído\\
 		WAN		& Rede de longa distância (\emph{Wide-area network})\\
\end{tabular}

%\chapter{Lista de Símbolos}
%\begin{tabular}{ll}
%		$\omega$    & Freqüência angular.\\
%		$\psi$      & Função de análise wavelet.\\
%		$\Psi$      & Transformada de Fourier de $\psi$.\\
%\end{tabular}

\listoffigures               % lista de Figuras
\listoftables                % lista de Tabelas

% ---------------------------------------------------------------------------- %
% Capítulos
\mainmatter

%\singlespacing              % espaçamento simples
\onehalfspacing              % espaçamento um e meio
%\doublespacing              % espaçamento duplo

\input cap-introducao        % associado ao arquivo: 'cap-introducao.tex'
\input cap-consistencia-em-sistemas-geo-replicados
\input cap-discussao-e-experimentos
\input cap-trabalhos-relacionados
\input cap-cronograma
%\appendix
%\include{ape-conjuntos}      % associado ao arquivo: 'ape-conjuntos.tex'

% ---------------------------------------------------------------------------- %
% Bibliografia
\backmatter \singlespacing   % espaçamento simples

\bibliographystyle{amsplain}
\bibliography{bibliografia}  % associado ao arquivo: 'bibliografia.bib'

% ---------------------------------------------------------------------------- %
% Índice remissivo
%\index{TBP|see{periodicidade região codificante}}
%\index{DSP|see{processamento digital de sinais}}
%\index{STFT|see{transformada de Fourier de tempo reduzido}}
%\index{DFT|see{transformada discreta de Fourier}}
%\index{Fourier!transformada|see{transformada de Fourier}}

%\printindex   % imprime o índice remissivo no documento 

\end{document}

% fin del archivo :-)
