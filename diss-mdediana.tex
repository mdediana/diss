% Arquivo LaTeX de exemplo de dissertação/tese a ser apresentados à CPG do IME-USP
% 
% Versão 5: Sex Mar  9 18:05:40 BRT 2012
%
% Criação: Jesús P. Mena-Chalco
% Revisão: Fabio Kon e Paulo Feofiloff
%  
% Obs: Leia previamente o texto do arquivo README.txt

\documentclass[11pt,twoside,a4paper]{book}

% ---------------------------------------------------------------------------- %
% Pacotes 
\usepackage[T1]{fontenc}
\usepackage[brazil]{babel}
\usepackage[latin1]{inputenc}
\usepackage[pdftex]{graphicx}           % usamos arquivos pdf/png como figuras
\usepackage{setspace}                   % espaçamento flexível
\usepackage{indentfirst}                % indentação do primeiro parágrafo
\usepackage{makeidx}                    % índice remissivo
\usepackage[nottoc]{tocbibind}          % acrescentamos a bibliografia/indice/conteudo no Table of Contents
\usepackage{courier}                    % usa o Adobe Courier no lugar de Computer Modern Typewriter
\usepackage{type1cm}                    % fontes realmente escaláveis
\usepackage{listings}                   % para formatar código-fonte (ex. em Java)
\usepackage{titletoc}
%\usepackage[bf,small,compact]{titlesec} % cabeçalhos dos títulos: menores e compactos
\usepackage[fixlanguage]{babelbib}
\usepackage[font=small,format=plain,labelfont=bf,up,textfont=it,up]{caption}
\usepackage[usenames,svgnames,dvipsnames,table]{xcolor}
\usepackage[a4paper,top=2.54cm,bottom=2.0cm,left=2.0cm,right=2.54cm]{geometry} % margens
%\usepackage[pdftex,plainpages=false,pdfpagelabels,pagebackref,colorlinks=true,citecolor=black,linkcolor=black,urlcolor=black,filecolor=black,bookmarksopen=true]{hyperref} % links em preto
\usepackage[pdftex,plainpages=false,pdfpagelabels,pagebackref,colorlinks=true,citecolor=DarkGreen,linkcolor=NavyBlue,urlcolor=DarkRed,filecolor=green,bookmarksopen=true]{hyperref} % links coloridos
\usepackage[all]{hypcap}                % soluciona o problema com o hyperref e capitulos
\usepackage[square,sort,nonamebreak,comma]{natbib}  % citação bibliográfica alpha (alpha-ime.bst)
\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}


% Tikz conf retirada de http://www.texample.net/tikz/examples/simple-flow-chart/
\usepackage{tikz}
\usetikzlibrary{shapes,arrows}

% Define block styles
\tikzstyle{decision} = [diamond, draw, fill=blue!20, 
    text width=5.5em, text badly centered, node distance=3cm, inner sep=0pt]
\tikzstyle{block} = [rectangle, draw, fill=blue!20, 
    text width=6em, text centered, rounded corners, minimum height=4em]
\tikzstyle{line} = [draw, -latex']
\tikzstyle{cloud} = [draw, ellipse,fill=red!20, node distance=3cm,
    minimum height=2em]

\hyphenation{mo-ni-to-ra-men-to ro-te-a-do-res e-xem-plo u-sa-do ins-tan-tes}

% ---------------------------------------------------------------------------- %
% Cabeçalhos similares ao TAOCP de Donald E. Knuth
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\MakeUppercase{#1}}{}}
\renewcommand{\headrulewidth}{0pt}

% ---------------------------------------------------------------------------- %
\graphicspath{{./figuras/}}             % caminho das figuras (recomendável)
\frenchspacing                          % arruma o espaço: id est (i.e.) e exempli gratia (e.g.) 
\urlstyle{same}                         % URL com o mesmo estilo do texto e não mono-spaced
\makeindex                              % para o índice remissivo
\raggedbottom                           % para não permitir espaços extra no texto
\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}
\cleardoublepage
\normalsize

% ---------------------------------------------------------------------------- %
% Opções de listing usados para o código fonte
% Ref: http://en.wikibooks.org/wiki/LaTeX/Packages/Listings
\lstset{ %
language=Java,                  % choose the language of the code
basicstyle=\footnotesize,       % the size of the fonts that are used for the code
numbers=left,                   % where to put the line-numbers
numberstyle=\footnotesize,      % the size of the fonts that are used for the line-numbers
stepnumber=1,                   % the step between two line-numbers. If it's 1 each line will be numbered
numbersep=5pt,                  % how far the line-numbers are from the code
showspaces=false,               % show spaces adding particular underscores
showstringspaces=false,         % underline spaces within strings
showtabs=false,                 % show tabs within strings adding particular underscores
frame=single,	                % adds a frame around the code
framerule=0.6pt,
tabsize=2,	                    % sets default tabsize to 2 spaces
captionpos=b,                   % sets the caption-position to bottom
breaklines=true,                % sets automatic line breaking
breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
escapeinside={\%*}{*)},         % if you want to add a comment within your code
backgroundcolor=\color[rgb]{1.0,1.0,1.0}, % choose the background color.
rulecolor=\color[rgb]{0.8,0.8,0.8},
extendedchars=true,
xleftmargin=10pt,
xrightmargin=10pt,
framexleftmargin=10pt,
framexrightmargin=10pt
}

% ---------------------------------------------------------------------------- %
% Corpo do texto
\begin{document}
\frontmatter 
% cabeçalho para as páginas das seções anteriores ao capítulo 1 (frontmatter)
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}
\setcounter{tocdepth}{2}
\fancyhead[LE]{\thepage\hspace{2em}\footnotesize{\leftmark}}
\fancyhead[RE,LO]{}
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}

\onehalfspacing  % espaçamento

% ---------------------------------------------------------------------------- %
% CAPA
% Nota: O título para as dissertações/teses do IME-USP devem caber em um 
% orifício de 10,7cm de largura x 6,0cm de altura que há na capa fornecida pela SPG.
\thispagestyle{empty}
\begin{center}
    \vspace*{2.3cm}
    \textbf{\Large{Desempenho de sistemas com\\
     dados georeplicados com consistência\\
     em momento indeterminado e\\ 
     na linha do tempo}}\\
    
    \vspace*{1.2cm}
    \Large{Maurício José de Oliveira De Diana}
    
    \vskip 2cm
    \textsc{
    Dissertação apresentada\\[-0.25cm] 
    ao\\[-0.25cm]
    Instituto de Matemática e Estatística\\[-0.25cm]
    da\\[-0.25cm]
    Universidade de São Paulo\\[-0.25cm]
    para\\[-0.25cm]
    obtenção do título\\[-0.25cm]
    de\\[-0.25cm]
    Mestre em Ciência da Computação}
    
    \vskip 1.5cm
    Programa: Mestrado em Ciência da Computação\\
    Orientador: Prof. Dr. Marco Aurélio Gerosa\\

   	\vskip 1cm
%    \normalsize{Durante o desenvolvimento deste trabalho o autor recebeu auxílio
%    financeiro da CAPES/CNPq/FAPESP}
    
    \vskip 0.5cm
    \normalsize{São Paulo, fevereiro de 2013}
\end{center}

% ---------------------------------------------------------------------------- %
% Página de rosto (SÓ PARA A VERSÃO DEPOSITADA - ANTES DA DEFESA)
% Resolução CoPGr 5890 (20/12/2010)
%
% IMPORTANTE:
%   Coloque um '%' em todas as linhas
%   desta página antes de compilar a versão
%   final, corrigida, do trabalho
%
%
% \newpage
% \thispagestyle{empty}
%     \begin{center}
%         \vspace*{2.3 cm}
%         \textbf{\Large{Desempenho de sistemas com\\
%       dados georeplicados com consistência\\
%       em momento indeterminado e\\
%       na linha do tempo}}\\
%         \vspace*{2 cm}
%     \end{center}
% 
%     \vskip 2cm
% 
%     \begin{flushright}
% 	Esta é a versão original da dissertação elaborada pelo\\
% 	candidato Maurício José de Oliveira De Diana, tal como \\
% 	submetida à Comissão Julgadora.
%     \end{flushright}
% 
% \pagebreak


% ---------------------------------------------------------------------------- %
% Página de rosto (SÓ PARA A VERSÃO CORRIGIDA - APÓS DEFESA)
% Resolução CoPGr 5890 (20/12/2010)
%
% Nota: O título para as dissertações/teses do IME-USP devem caber em um 
% orifício de 10,7cm de largura x 6,0cm de altura que há na capa fornecida pela SPG.
%
% IMPORTANTE:
%   Coloque um '%' em todas as linhas desta
%   página antes de compilar a versão do trabalho que será entregue
%   à Comissão Julgadora antes da defesa
%
%
\newpage
\thispagestyle{empty}
    \begin{center}
        \vspace*{2.3 cm}
         \textbf{\Large{Desempenho de sistemas com\\
       dados georeplicados com consistência\\
       em momento indeterminado e\\
       na linha do tempo}}\\
        \vspace*{2 cm}
    \end{center}

    \vskip 2cm

    \begin{flushright}
	Esta versão da dissertação/tese contém as correções e alterações sugeridas\\
	pela Comissão Julgadora durante a defesa da versão original do trabalho,\\
	realizada em 21/03/2013. Uma cópia da versão original está disponível no\\
	Instituto de Matemática e Estatística da Universidade de São Paulo.

    \vskip 2cm

    \end{flushright}
    \vskip 4.2cm

    \begin{quote}
    \noindent Comissão Julgadora:
    
    \begin{itemize}
		\item Prof. Dr. Marco Aurélio Gerosa (orientador) - IME-USP
		\item Prof. Dr. Daniel Macedo Batista - IME-USP
		\item Prof. Dr. Magnos Martinello - UFES
    \end{itemize}
     
    \end{quote}
\pagebreak


\pagenumbering{roman}     % começamos a numerar 

% ---------------------------------------------------------------------------- %
% Agradecimentos:
% Se o candidato não quer fazer agradecimentos, deve simplesmente eliminar esta página 
\chapter*{Agradecimentos}
Eu gostaria de agradecer:

Primeiramente, ao Prof. Dr. Marco Aurélio Gerosa, por me mostrar o caminho na
academia, também pela confiança e paciência.

Aos Profs. Drs. Daniel Macedo Batista, José Eduardo Ferreira e Magnos Martinello
pelas sugestões nas bancas de qualificação e de defesa.

A Adrien Lèbre, Gustavo Bervian Brand e Louis-Claude Canon pelos ensinamentos
sobre sistemas distribuídos e análise de desempenho. A Adrien e Gabriel Antoniu
por me darem oportunidades em seus grupos.

A Alfredo Goldman e Olivier Richard por viabilizarem a infraestrutura para os
experimentos.

A Paulo Miotto, Fabio Akita e Gleicon Moraes pelas lições sobre computação e
profissão.

A Gustavo Oliva e Mauricio Aniche pelos debates sobre a pesquisa. Ao Aniche,
também pela parceria nas disciplinas.

A Adolfo Sousa pela logística de apoio em São Paulo.

A Daniel Prado pela companhia nos momentos de despressurização.

A família, pelo pelo apoio incondicional.\\

Os experimentos apresentados neste trabalho foram realizados utilizando a
plataforma para experimentos Grid'5000, desenvolvida pela ação de
desenvolvimento ALADDIN INRIA com o apoio do CNRS, RENATER e várias
universidades, bem como outros organismos de financiamento (ver
https://www.grid5000.fr).

% ---------------------------------------------------------------------------- %
% Resumo
\chapter*{Resumo}

\noindent DE DIANA, M. J. O. \textbf{Desempenho de sistemas com dados
georeplicados com consistência em momento indeterminado e na linha do tempo}.
2013. 66 f. - Instituto de Matemática e Estatística, Universidade de São Paulo,
São Paulo, 2013.\\

Sistemas web de larga escala são distribuídos em milhares de servidores em
múltiplos centros de processamento de dados em diferentes localizações
geográficas, operando sobre redes de longa distância (WANs). Várias técnicas são
usadas para atingir os altos níveis de escalabilidade requeridos por esses
sistemas. Replicação de dados está entre as principais delas, e tem por objetivo
diminuir a latência, aumentar a vazão e/ou aumentar a disponibilidade do
sistema. O principal problema do uso de replicação em sistemas georeplicados é a
dificuldade de garantir consistência entre as réplicas sem prejudicar
consideravelmente o desempenho e a disponibilidade do sistema. O desempenho do
sistema é afetado pelas latências da ordem de centenas de milissegundos da WAN,
enquanto a disponibilidade é afetada por falhas que impedem a comunicação entre
as réplicas. Quanto mais rígido o modelo de consistência de um sistema de
armazenamento, mais simples é o desenvolvimento do sistema que o usa, mas
menores são seu desempenho e disponibilidade.

Entre os modelos de consistência mais relaxados e mais difundidos em sistemas
web georeplicados está a consistência em momento indeterminado (\emph{eventual
consistency}). Esse modelo de consistência garante que em algum momento as
réplicas convergem após as escritas terem cessado. Um modelo mais rígido e menos
difundido é a consistência na linha do tempo. Esse modelo de consistência usa
uma réplica mestre para garantir que não ocorram conflitos na escrita. Nas
leituras, os clientes podem ler os valores mais recentes a partir da cópia
mestre, ou optar explicitamente por ler valores possivelmente desatualizados
para obter maior desempenho ou disponibilidade. A consistência na linha do tempo
apresenta disponibilidade menor que a consistência em momento indeterminado em
determinadas situações, mas não há dados comparando o desempenho de ambas.

O objetivo principal deste trabalho foi a comparação do desempenho de sistemas
de armazenamento georeplicados usando esses dois modelos de consistência. Para
cada modelo de consistência, foram realizados experimentos que mediram o tempo
de resposta do sistema sob diferentes cargas de trabalho e diferentes condições
de rede entre centros de processamento de dados. Esse comparativo pode auxiliar
desenvolvedores e administradores de sistemas no processo de planejamento de
capacidade e nas estimativas do custo de desenvolvimento de um sistema
georeplicado.\\

\noindent \textbf{Palavras-chave:} Sistemas distribuídos, modelos de
consistência, sistemas web de larga escala, análise de desempenho.

% ---------------------------------------------------------------------------- %
% Abstract
\chapter*{Abstract}

\noindent DE DIANA, M. J. O. \textbf{Performace of systems with geo-replicated
data with eventual consistency and timeline consistency}. 2013. 66 f. -
Instituto de Matemática e Estatística, Universidade de São Paulo, São Paulo,
2013.  \\

Large scale web systems are distributed among thousands of servers spread over
multiple data centers in geographically different locations operating over wide
area networks (WANs). Several techniques are employed to achieve the high levels
of scalability required by such systems. One of the main techniques is data
replication, which aims to reduce latency, increase throughput and/or increase
availability. The main drawback of replication in geo-replicated systems is that
it is hard to guarantee consistency between replicas without considerably
impacting system performance and availability. System performance is affected by
WAN latencies, typically of hundreds of miliseconds, while system availability
is affected by failures cutting off communication between replicas.  The more
rigid the consistency model provided by a storage system, the simpler the
development of the system using it, but the lower its performance and
availability.

Eventual consistency is one of the more relaxed and most widespread consistency
models among geo-replicated systems. This consistency model guarantees that all
replicas converge at some unspecified time after writes have stopped. A model
that is more rigid and less widespread is timeline consistency. This consistency
model uses a master replica to guarantee that no write conflicts occur. Clients
can read the most up-to-date values from the master replica, or they can
explicitly choose to read stale values to obtain greater performance or
availability. Timeline consistency shows lower availability than eventual
consistency in particular situations, but there are no data comparing their
performance.

The main goal of this work was to compare the performance of a geo-replicated
storage system using these consistency models. For each consistency model,
experiments were run to measure system response time under different workloads
and network conditions between data centers. This study may help developers and
system administrators on capacity planning and when estimating development cost
of geo-replicated systems.\\

\noindent \textbf{Keywords:} Distributed systems, consistency models, large
scale web systems, performance analysis.

% ---------------------------------------------------------------------------- %
% Sumário
\tableofcontents    % imprime o sumário

% ---------------------------------------------------------------------------- %
\chapter{Lista de Abreviaturas}
\begin{tabular}{ll}
  ACID	& Atomicidade, Consistência, Isolamento, Durabilidade\\
  CAP		& Consistência, Disponibilidade, Tolerância a particionamento de rede\\
 				& (\emph{Consistency, Availability, Partition tolerance})\\
  CRDT  & Tipos de Dados Replicados Livres de Conflito\\
        & (\emph{Conflict-free Replicated Data Type})\\
  CV  & Coeficiente de Variação\\
 		DHT		& Tabela de Espalhamento Distribuída (\emph{Distributed Hash Table})\\
  FDA & Função Distribuição Acumulada\\
  LAN & Rede Local (\emph{Local Area Network})\\
  PACELC	& Particionamento, Disponibilidade, Consistência. Senão, Latência, Consistência\\
 				& (\emph{Partition, Availability, Consistency. Else, Latency, Consistency})\\
  SGBD	& Sistema Gerenciador de Bancos de Dados\\
  SGBDD	& Sistema Gerenciador de Bancos de Dados Distribuído\\
  WAN		& Rede de Longa Distância (\emph{Wide Area Network})\\
\end{tabular}

% ---------------------------------------------------------------------------- %
%\chapter{Lista de Símbolos}
%\begin{tabular}{ll}
%        $\omega$    & Frequência angular\\
%        $\psi$      & Função de análise \emph{wavelet}\\
%        $\Psi$      & Transformada de Fourier de $\psi$\\
%\end{tabular}

% ---------------------------------------------------------------------------- %
% Listas de figuras e tabelas criadas automaticamente
\listoffigures            
\listoftables            

% ---------------------------------------------------------------------------- %
% Capítulos do trabalho
\mainmatter

% cabeçalho para as páginas de todos os capítulos
\fancyhead[RE,LO]{\thesection}

\singlespacing              % espaçamento simples
%\onehalfspacing            % espaçamento um e meio

\input cap-introducao        % associado ao arquivo: 'cap-introducao.tex'
\input cap-consistencia-em-sistemas-georeplicados
\input cap-planejamento
\input cap-parametros-e-fatores
\input cap-aspectos-tecnicos
\input cap-analise-dos-resultados
\input cap-conclusoes

% cabeçalho para os apêndices
%\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\appendixname\ \thechapter}} {\MakeUppercase{#1}} }
%\fancyhead[RE,LO]{}
%\appendix

%\include{ape-conjuntos}      % associado ao arquivo: 'ape-conjuntos.tex'

% ---------------------------------------------------------------------------- %
% Bibliografia
\backmatter \singlespacing   % espaçamento simples
\bibliographystyle{alpha-ime}% citação bibliográfica alpha
\bibliography{bibliografia}  % associado ao arquivo: 'bibliografia.bib'

% ---------------------------------------------------------------------------- %
% Índice remissivo
%\index{TBP|see{periodicidade região codificante}}
%\index{DSP|see{processamento digital de sinais}}
%\index{STFT|see{transformada de Fourier de tempo reduzido}}
%\index{DFT|see{transformada discreta de Fourier}}
%\index{Fourier!transformada|see{transformada de Fourier}}

%\printindex   % imprime o índice remissivo no documento 

\end{document}
